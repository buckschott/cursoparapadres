@import "tailwindcss";

/* ===== DESIGN TOKENS ===== */
:root {
  /* Colors */
  --chalk-white: #FFFFFF;
  --chalk-yellow: #FFE566;
  --chalk-pink: #FF9999;
  --chalk-blue: #7EC8E3;
  --chalk-green: #77DD77;
  --chalk-orange: #FFB347;
  --chalk-purple: #B19CD9;
  --background: #1C1C1C;
  --foreground: #ffffff;

  /* Animation Timing - Single source of truth */
  --timing-instant: 100ms;
  --timing-fast: 200ms;
  --timing-normal: 300ms;
  --timing-slow: 600ms;
  --timing-reveal: 800ms;

  /* Animation Easing */
  --ease-out-smooth: cubic-bezier(0.4, 0, 0.2, 1);
  --ease-out-back: cubic-bezier(0.34, 1.56, 0.64, 1);

  /* Z-Index Scale - Documented! */
  --z-base: 0;
  --z-above: 10;
  --z-section: 20;
  --z-mobile-menu: 100;
  --z-header: 200;
  --z-toast: 300;
  --z-modal: 400;
}

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --font-sans: var(--font-courier-prime);
  --font-mono: var(--font-courier-prime);
}

.bg-chalkboard {
  background-color: #1C1C1C;
}

body {
  background: var(--background);
  color: var(--foreground);
  font-family: var(--font-courier-prime), 'Courier Prime', monospace;
}

.font-brand {
  font-family: var(--font-short-stack), 'Short Stack', cursive;
}

/* ===== SECTION DIVIDERS ===== */
.section-divider {
  position: relative;
}

.section-divider::before {
  content: '';
  position: absolute;
  top: 0;
  left: 50%;
  transform: translateX(-50%);
  width: min(90%, 1200px);
  height: 1px;
  background: linear-gradient(90deg, transparent 0%, rgba(255,255,255,0.15) 15%, rgba(255,255,255,0.25) 50%, rgba(255,255,255,0.15) 85%, transparent 100%);
}

/* ===== MOBILE MENU ===== */
.mobile-menu-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: #000000;
  color: #ffffff;
  z-index: var(--z-mobile-menu);
  overflow-y: auto;
  transform: translateY(-100%);
  transition: transform 0.4s var(--ease-out-smooth);
}

.mobile-menu-overlay.menu-open {
  transform: translateY(0);
}

.mobile-menu-content {
  opacity: 0;
  transform: translateY(-20px);
  transition: opacity var(--timing-normal) ease 0.1s, transform var(--timing-normal) ease 0.1s;
}

.mobile-menu-overlay.menu-open .mobile-menu-content {
  opacity: 1;
  transform: translateY(0);
}

.menu-item {
  opacity: 0;
  transform: translateY(-15px);
  transition: all 0.4s var(--ease-out-smooth);
}

.mobile-menu-overlay.menu-open .menu-item {
  opacity: 1;
  transform: translateY(0);
}

.mobile-menu-overlay.menu-open .menu-item:nth-child(1) { transition-delay: 0.15s; }
.mobile-menu-overlay.menu-open .menu-item:nth-child(2) { transition-delay: 0.2s; }
.mobile-menu-overlay.menu-open .menu-item:nth-child(3) { transition-delay: 0.25s; }

/* Hamburger icon */
.hamburger-icon {
  position: relative;
  width: 24px;
  height: 18px;
}

.hamburger-line {
  position: absolute;
  left: 0;
  width: 100%;
  height: 2px;
  background-color: currentColor;
  transition: all var(--timing-normal) ease-out;
  border-radius: 2px;
}

.hamburger-line:nth-child(1) { top: 0; }
.hamburger-line:nth-child(2) { top: 8px; }
.hamburger-line:nth-child(3) { top: 16px; }

.hamburger-icon.menu-open .hamburger-line:nth-child(1) {
  top: 8px;
  transform: rotate(45deg);
}

.hamburger-icon.menu-open .hamburger-line:nth-child(2) {
  opacity: 0;
  transform: scale(0);
}

.hamburger-icon.menu-open .hamburger-line:nth-child(3) {
  top: 8px;
  transform: rotate(-45deg);
}

/* ===== SCROLL ANIMATIONS ===== */
.scroll-reveal {
  opacity: 0;
  transform: translateY(50px);
  transition: opacity var(--timing-reveal) ease-out, transform var(--timing-reveal) ease-out;
}

.scroll-reveal-active {
  opacity: 1;
  transform: translateY(0);
}

/* ===== SVG DRAW ANIMATIONS ===== */
.draw-svg {
  color: #9ca3af;
  transition: transform var(--timing-normal) ease;
}

.draw-svg path {
  stroke-dasharray: 4000;
  stroke-dashoffset: 4000;
  animation: none;
}

.scroll-reveal-active .draw-svg path {
  animation: draw 4s ease forwards;
}

@keyframes draw {
  to { stroke-dashoffset: 0; }
}

.scroll-reveal-active .draw-svg path:nth-child(1) { animation-delay: 0s; }
.scroll-reveal-active .draw-svg path:nth-child(2) { animation-delay: 0.1s; }
.scroll-reveal-active .draw-svg path:nth-child(3) { animation-delay: 0.2s; }
.scroll-reveal-active .draw-svg path:nth-child(4) { animation-delay: 0.3s; }
.scroll-reveal-active .draw-svg path:nth-child(5) { animation-delay: 0.4s; }
.scroll-reveal-active .draw-svg path:nth-child(6) { animation-delay: 0.5s; }
.scroll-reveal-active .draw-svg path:nth-child(7) { animation-delay: 0.6s; }
.scroll-reveal-active .draw-svg path:nth-child(8) { animation-delay: 0.7s; }
.scroll-reveal-active .draw-svg path:nth-child(9) { animation-delay: 0.8s; }
.scroll-reveal-active .draw-svg path:nth-child(10) { animation-delay: 0.9s; }
.scroll-reveal-active .draw-svg path:nth-child(11) { animation-delay: 1.0s; }
.scroll-reveal-active .draw-svg path:nth-child(12) { animation-delay: 1.1s; }
.scroll-reveal-active .draw-svg path:nth-child(13) { animation-delay: 1.2s; }
.scroll-reveal-active .draw-svg path:nth-child(14) { animation-delay: 1.3s; }
.scroll-reveal-active .draw-svg path:nth-child(15) { animation-delay: 1.4s; }

@media (min-width: 768px) {
  .group:hover .draw-svg { transform: scale(1.1); }
}

/* ===== DEVICE ANIMATIONS ===== */
.device-animate {
  opacity: 1;
  transition: transform var(--timing-slow) ease-out;
}

.device-animate .device-img {
  opacity: 0.3;
  filter: grayscale(100%);
  transition: opacity var(--timing-slow) ease-out, filter var(--timing-slow) ease-out;
}

.device-animate.device-active .device-img {
  opacity: 1;
  filter: grayscale(0%);
}

.device-text-below { 
  transition: opacity 0.4s ease-out 0.3s; 
}

.device-active .device-text-below { 
  opacity: 1 !important; 
}

.device-desktop.device-active .sparkles-overlay { 
  opacity: 1; 
}

.sparkles-position {
  transform: translate(0, -70%) scale(1);
  transform-origin: center top;
}

@media (min-width: 768px) {
  .sparkles-position {
    transform: translate(0, -105%) scale(1);
    transform-origin: center top;
  }
}

/* ===== HERO SECTION ===== */
.hero-section {
  min-height: calc(100vh - 73px);
  min-height: calc(100svh - 73px);
}

.hero-content {
  min-height: calc(100vh - 73px);
  min-height: calc(100svh - 73px);
  padding-top: 50px;
  padding-bottom: 50px;
  gap: 1rem;
}

/* ===== TRUST BADGE ROTATION ===== */
.trust-badge-text {
  position: relative;
  font-size: clamp(0.875rem, 4.5vw, 1.25rem);
}

.trust-text-1, .trust-text-2 {
  transition: opacity var(--timing-slow) ease-in-out;
  white-space: nowrap;
}

.trust-text-2 {
  opacity: 0;
}

@keyframes trustRotate1 {
  0%, 42% { opacity: 1; }
  50%, 92% { opacity: 0; }
  100% { opacity: 1; }
}

@keyframes trustRotate2 {
  0%, 42% { opacity: 0; }
  50%, 92% { opacity: 1; }
  100% { opacity: 0; }
}

.trust-text-1 {
  animation: trustRotate1 8s ease-in-out infinite;
}

.trust-text-2 {
  animation: trustRotate2 8s ease-in-out infinite;
}

/* ===== SUBTEXT REVEAL ===== */
@keyframes subtextReveal {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

.subtext-line {
  opacity: 0;
  animation: subtextReveal var(--timing-slow) ease-out forwards;
}

.subtext-line-1 { animation-delay: 1s; }
.subtext-line-2 { animation-delay: 2s; }
.subtext-line-3 { animation-delay: 3s; }

/* ===== FOOTER ENTRANCE ANIMATION ===== */
.footer-cta {
  opacity: 0;
  transform: translateY(30px);
  transition: opacity var(--timing-reveal) ease-out, transform var(--timing-reveal) ease-out;
}

.footer-cta.footer-visible {
  opacity: 1;
  transform: translateY(0);
}

.footer-cta-button {
  position: relative;
  overflow: hidden;
}

.footer-cta-button::after {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 0;
  height: 0;
  background: rgba(255, 255, 255, 0.2);
  border-radius: 50%;
  transform: translate(-50%, -50%);
  transition: width 0.5s ease-out, height 0.5s ease-out;
}

.footer-cta-button:hover::after {
  width: 300%;
  height: 300%;
}

/* ===== UTILITIES ===== */
.scrollbar-hide::-webkit-scrollbar { display: none; }
.scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }

/* ===== MOBILE PORTRAIT OVERRIDES ===== */
@media (orientation: portrait) and (max-width: 767px) {
  .header-title { font-size: 1.25rem !important; }
  .hero-title { font-size: 1.75rem !important; line-height: 1.1; }
  .hero-line-1, .hero-line-2 { display: inline-block; white-space: normal; }
  .hero-subheadline { font-size: 1.125rem !important; line-height: 1.5; }
  .trust-badge-text { font-size: clamp(0.8rem, 4.2vw, 1rem) !important; }
  .trust-badge-pill { margin-left: 0; margin-right: 0; }
  .cta-button { font-size: 1.25rem !important; padding: 1rem 2rem !important; }
  .secondary-cta { font-size: 1.125rem !important; }
  .hero-content { gap: 1.25rem; padding-top: 50px; padding-bottom: 50px; }
}

/* ===== TOAST ANIMATIONS ===== */
@keyframes toastShrink {
  from { width: 100%; }
  to { width: 0%; }
}

/* ===== CTA ARROW ANIMATION ===== */
.cta-arrow-path {
  stroke-dasharray: 2800;
  stroke-dashoffset: 2800;
  opacity: 0;
}

/* Looping animation: 1.5s draw + 4s visible pause + 0.5s fade = 6s total */
.cta-arrow-animate {
  animation: arrowDraw 6s ease-in-out infinite;
}

@keyframes arrowDraw {
  0% {
    stroke-dashoffset: 2800;
    opacity: 0;
  }
  /* Fade in as draw starts */
  2% {
    stroke-dashoffset: 2750;
    opacity: 1;
  }
  /* Draw completes at 25% (1.5s of 6s) */
  25% {
    stroke-dashoffset: 0;
    opacity: 1;
  }
  /* Stay visible until ~92% (1.5s + 4s = 5.5s of 6s) */
  92% {
    stroke-dashoffset: 0;
    opacity: 1;
  }
  /* Quick fade out */
  97% {
    stroke-dashoffset: 0;
    opacity: 0;
  }
  /* Reset for next loop */
  100% {
    stroke-dashoffset: 2800;
    opacity: 0;
  }
}

/* ===== CHALK DUST PARTICLE BURST ===== */
@keyframes chalkBurst {
  0% {
    transform: translate(-50%, -50%) scale(1);
    opacity: 0.9;
  }
  100% {
    transform: 
      translate(
        calc(-50% + cos(var(--angle)) * var(--speed) * 20px),
        calc(-50% + sin(var(--angle)) * var(--speed) * 20px)
      ) 
      scale(0);
    opacity: 0;
  }
}

/* Fallback for browsers without trig functions */
@supports not (transform: translate(calc(cos(0) * 1px), 0)) {
  @keyframes chalkBurst {
    0% {
      transform: translate(-50%, -50%) scale(1);
      opacity: 0.9;
    }
    100% {
      transform: translate(
        calc(-50% + var(--speed) * 15px),
        calc(-50% + var(--speed) * -10px)
      ) scale(0);
      opacity: 0;
    }
  }
}

/* ===== REDUCED MOTION - COMPLETE IMPLEMENTATION ===== */
@media (prefers-reduced-motion: reduce) {
  /* Disable all transforms and animations globally */
  *, *::before, *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }

  /* Scroll reveal - show immediately without animation */
  .scroll-reveal {
    opacity: 1;
    transform: none;
  }

  /* SVG draw - show complete, no animation */
  .draw-svg path {
    stroke-dashoffset: 0;
    animation: none !important;
  }

  /* Device animations - show active state immediately */
  .device-animate .device-img {
    opacity: 1;
    filter: none;
  }

  /* Trust badge - show first message only, no rotation */
  .trust-text-1 {
    animation: none;
    opacity: 1;
  }
  .trust-text-2 {
    animation: none;
    opacity: 0;
    display: none;
  }

  /* Subtext - show immediately */
  .subtext-line {
    opacity: 1;
    animation: none;
    transform: none;
  }

  /* CTA arrow - show static */
  .cta-arrow-path,
  .cta-arrow-animate {
    animation: none;
    stroke-dashoffset: 0;
    opacity: 1;
  }

  /* Chalk dust - disable */
  @keyframes chalkBurst {
    0%, 100% {
      transform: none;
      opacity: 0;
    }
  }

  /* Footer entrance - show immediately */
  .footer-cta {
    opacity: 1;
    transform: none;
  }

  /* Mobile menu - still needs to work, just instant */
  .mobile-menu-overlay {
    transition: none;
  }
  .mobile-menu-overlay.menu-open {
    transform: translateY(0);
  }
  .mobile-menu-overlay:not(.menu-open) {
    transform: translateY(-100%);
  }

  /* Hover effects - keep subtle feedback but no animation */
  .group:hover .draw-svg {
    transform: none;
  }

  /* Checkout overlay - show static */
  .checkout-spinner,
  .checkout-ring,
  .checkout-arc,
  .checkout-check,
  .checkout-check-path {
    animation: none !important;
  }
  
  .checkout-ring {
    stroke-dashoffset: 0;
  }
  
  .checkout-arc {
    transform: none;
  }
}

/* ===== CHECKOUT OVERLAY ANIMATIONS ===== */

/* Spinner container entrance */
.checkout-spinner {
  animation: checkoutFadeIn 0.4s ease-out forwards;
}

/* Outer ring draws itself */
.checkout-ring {
  animation: checkoutRingDraw 1.2s ease-out 0.2s forwards;
}

@keyframes checkoutRingDraw {
  to {
    stroke-dashoffset: 0;
  }
}

/* Inner arc spins continuously */
.checkout-arc {
  transform-origin: center;
  animation: checkoutArcSpin 1.2s linear infinite;
}

@keyframes checkoutArcSpin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

/* Checkmark - hidden for now, could animate on success */
.checkout-check {
  opacity: 0;
}

.checkout-check-path {
  animation: none;
}

/* Fade in entrance */
@keyframes checkoutFadeIn {
  from {
    opacity: 0;
    transform: scale(0.9);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

/* ===== COURSE PAGE ANIMATIONS ===== */
/* Add these to your globals.css */

/* ===== FLOATING PARTICLES (Celebration) ===== */
@keyframes float {
  0%, 100% {
    transform: translateY(0) rotate(0deg);
  }
  50% {
    transform: translateY(-20px) rotate(180deg);
  }
}

/* ===== CERTIFICATE STAMP ANIMATION ===== */
.certificate-stamp {
  animation: stampEntrance 0.6s ease-out forwards;
}

.certificate-ring {
  stroke-dasharray: 283;
  stroke-dashoffset: 283;
  animation: ringDraw 1s ease-out 0.3s forwards;
}

.certificate-check {
  stroke-dasharray: 60;
  stroke-dashoffset: 60;
  animation: checkDraw 0.5s ease-out 1s forwards;
}

@keyframes stampEntrance {
  0% {
    opacity: 0;
    transform: scale(1.5) rotate(-10deg);
  }
  50% {
    opacity: 1;
    transform: scale(0.9) rotate(5deg);
  }
  100% {
    opacity: 1;
    transform: scale(1) rotate(0deg);
  }
}

@keyframes ringDraw {
  to {
    stroke-dashoffset: 0;
  }
}

@keyframes checkDraw {
  to {
    stroke-dashoffset: 0;
  }
}

/* ===== PING ANIMATION (for "En Progreso" indicator) ===== */
@keyframes ping {
  75%, 100% {
    transform: scale(2);
    opacity: 0;
  }
}

.animate-ping {
  animation: ping 1s cubic-bezier(0, 0, 0.2, 1) infinite;
}

/* ===== REDUCED MOTION ===== */
@media (prefers-reduced-motion: reduce) {
  .certificate-stamp,
  .certificate-ring,
  .certificate-check {
    animation: none;
    stroke-dashoffset: 0;
    opacity: 1;
    transform: none;
  }
  
  @keyframes float {
    0%, 100% {
      transform: none;
    }
  }
  
  .animate-ping {
    animation: none;
  }
}